# Invisible Proof â€“Â ì›Œí„°ë§ˆí¬â€¯ì¦ê±°â€¯ì‹œìŠ¤í…œ

> **"í´ë¼ì´ì–¸íŠ¸ì˜ ì €ì‘ê¶Œì„, ëˆˆì— ë³´ì´ì§€ ì•Šê²Œ."**

Invisibleâ€¯ProofëŠ” ë””ì§€í„¸ ì´ë¯¸ì§€ì— **ë³´ì´ì§€ ì•ŠëŠ” ì›Œí„°ë§ˆí¬**ì™€ **RFCâ€¯3161 íƒ€ì„ìŠ¤íƒ¬í”„**ë¥¼ ì‚½ì…í•˜ê³ , ëª¨ë“  ì¦ê±°ë¥¼ **JWSâ€¯í† í°** í•˜ë‚˜ë¡œ íŒ¨í‚¤ì§•í•´ ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì„œë²„ê°€ ì•„ë‹Œ **í´ë¼ì´ì–¸íŠ¸**ì˜ ì†Œìœ ê¶Œì„ ëŒ€í–‰â€†ì¦ëª…í•œë‹¤ëŠ” ì ì´ ê¸°ì¡´ ì›Œí„°ë§ˆí¬ ì†”ë£¨ì…˜ê³¼ ê°€ì¥ ë‹¤ë¥¸ ì ì…ë‹ˆë‹¤.

---

## ëª©ì°¨
1. [ì™œ InvisibleÂ Proofì¸ê°€?](#ì™œ-invisible-proofì¸ê°€)
2. [ì£¼ìš” íŠ¹ì§•](#ì£¼ìš”-íŠ¹ì§•)
3. [ì‘ë™ ë°©ì‹](#ì‘ë™-ë°©ì‹)
4. [ê¸°ìˆ ì  ì„¸ë¶€Â ì‚¬í•­](#ê¸°ìˆ ì -ì„¸ë¶€-ì‚¬í•­)
5. [APIÂ ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
6. [ë³´ì•ˆ](#ë³´ì•ˆ)
7. [ì„œë¹„ìŠ¤ë¡œ ì–»ëŠ” ì´ì ](#ì„œë¹„ìŠ¤ë¡œ-ì–»ëŠ”-ì´ì )

---

## ì™œ InvisibleÂ Proofì¸ê°€?

### ğŸ“¸Â ë””ì§€í„¸ ìì‚° ì†Œìœ ê¶Œì„ ì–´ë–»ê²Œ ì¦ëª…í• ê¹Œ?
- ì‹œê°ì  ì›Œí„°ë§ˆí¬ëŠ” ì‰½ê²Œ ì§€ì›Œì§€ê±°ë‚˜ ì´ë¯¸ì§€ í’ˆì§ˆì„ ì†ìƒì‹œí‚µë‹ˆë‹¤.
- **InvisibleÂ Proof**ëŠ” `blind_watermark`(https://github.com/guofei9987/blind_watermark)ê¸°ë°˜ì˜ **ë³´ì´ì§€ ì•ŠëŠ” ì›Œí„°ë§ˆí¬**ë¥¼ ì‚¬ìš©í•´ í’ˆì§ˆ ì†ìƒ ì—†ì´ ì†Œìœ ê¶Œ ì •ë³´ë¥¼ ê°ì¸í•©ë‹ˆë‹¤.

### â°Â "ì–¸ì œ"ë¥¼ ë²•ì ìœ¼ë¡œ ì¦ëª…í•˜ê³  ì‹¶ë‹¤
- ì´ë¯¸ì§€ê°€ ì–¸ì œ ì¡´ì¬í–ˆëŠ”ì§€ ì¦ëª…í•  **ì‹ ë¢°í•  ë§Œí•œ íƒ€ì„ìŠ¤íƒ¬í”„**ê°€ í•„ìš”í•©ë‹ˆë‹¤.
- FreeTSA.orgë¥¼ í†µí•´ **RFCâ€¯3161 í‘œì¤€** íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ë°œê¸‰í•˜ì—¬ í–¥í›„ ë²•ì  íš¨ë ¥ ìˆëŠ” TSAì™€ë„ 100â€¯% í˜¸í™˜ë©ë‹ˆë‹¤.

### ğŸ“¦Â ì¦ê±° ë°ì´í„°, ë„ˆë¬´ ë§ê³  ë³µì¡í•˜ë‹¤
- ì›Œí„°ë§ˆí¬ ì •ë³´, íƒ€ì„ìŠ¤íƒ¬í”„, ë©”íƒ€ë°ì´í„°ë¥¼ ë”°ë¡œ ê´€ë¦¬í•˜ë©´ ì‹¤ìˆ˜ì™€ ë¶„ì‹¤ ìœ„í—˜ì´ ì»¤ì§‘ë‹ˆë‹¤.
- ì„œë²„ê°€ **JWS í† í°**ìœ¼ë¡œ í•œë° ë¬¶ì–´ ì„œëª…í•©ë‹ˆë‹¤. ì„œëª… í•œ ë²ˆìœ¼ë¡œ ë³€ì¡° ì—¬ë¶€ë¥¼ ì¦‰ì‹œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ì£¼ìš” íŠ¹ì§•
- **í´ë¼ì´ì–¸íŠ¸ ì¤‘ì‹¬ ì†Œìœ ê¶Œ ì¦ëª…** â€“Â ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ê²€ì¦í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ ëª…ì˜ ì›Œí„°ë§ˆí¬ë¥¼ ì‚½ì…í•©ë‹ˆë‹¤.
- **RSAÂ í‚¤ êµí™˜ &Â ì„œëª… ê²€ì¦** â€“Â ì–‘ì¸¡ RSAÂ í‚¤ë¡œ ìš”ì²­ ë¬´ê²°ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.
- **ì¤‘ë¦½ì  ì œ3ì ì—­í• ** â€“Â ì„œë²„ ì„œëª…ê³¼ TSA íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ì œ3ìì—ê²Œë„ ì‹ ë¢°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **Evidenceâ€¯=â€¯ì´ë¯¸ì§€Â +Â íƒ€ì„ìŠ¤íƒ¬í”„Â +Â ë©”íƒ€ë°ì´í„°** â€“Â ëª¨ë‘ë¥¼ JWSâ€¯1Â í† í°ìœ¼ë¡œ íŒ¨í‚¤ì§•.

---

## ì‘ë™ ë°©ì‹

```mermaid
sequenceDiagram
    participant Client
    participant Server
    participant TSA

    Client->>Server: ì‚¬ìš©ì ë“±ë¡ (POST /api/v1/user)
    Server-->>Client: API í‚¤ ë°œê¸‰

    Client->>Server: RSA í‚¤ êµí™˜ (PUT /api/v1/user/{user_id})
    Server-->>Client: ì„œë²„ ê³µê°œí‚¤ ë°˜í™˜

    Client->>Server: ì´ë¯¸ì§€ ì—…ë¡œë“œ + ì•”í˜¸í™” íŒ¨í‚¤ì§€ (POST /api/v1/watermark)
    Server->>Server: íŒ¨í‚¤ì§€Â·ì„œëª… ê²€ì¦
    Server->>Server: ë³´ì´ì§€ ì•ŠëŠ” ì›Œí„°ë§ˆí¬ ì‚½ì…
    Server->>TSA: íƒ€ì„ìŠ¤íƒ¬í”„ ìš”ì²­
    TSA-->>Server: íƒ€ì„ìŠ¤íƒ¬í”„ ì‘ë‹µ
    Server->>Server: Evidence JSON ìƒì„± â†’Â JWS ì„œëª…
    Server-->>Client: ì›Œí„°ë§ˆí¬ ì´ë¯¸ì§€ &Â JWS ì¦ê±° í† í°

    Client->>Server: ì›Œí„°ë§ˆí¬ ì¶”ì¶œ (POST /api/v1/extract-watermark)
    Server-->>Client: ì¶”ì¶œëœ ì›Œí„°ë§ˆí¬ í…ìŠ¤íŠ¸
```

---

## ê¸°ìˆ ì  ì„¸ë¶€Â ì‚¬í•­

### EvidenceÂ JSON (payload)
```json
{
  "iss": "copyright-tanminkwan.org",
  "sub": "user_id",
  "iat": 1714024800,
  "version": "1.0",
  "evidence": {
    "file_sha256": "ab34â€¦",
    "file_size": 512034,
    "wm_algorithm": "blind_watermark-v1",
    "wm_text": "Owned by user_id â€¦",
    "image_url": "s3://â€¦/watermarked_x.jpg",
    "timestamp": {
      "tsq": "<Base64-DER>",
      "tsr": "<Base64-DER>",
      "tsa_chain": "<PEM bundle>",
      "gen_time": "2025-04-25T11:22:33Z"
    }
  }
}
```

### JWSâ€¯CompactÂ Serialization
```
BASE64URL(header).BASE64URL(payload).BASE64URL(signature)
```

- **Header**Â â€“Â alg, kid ë“± ë©”íƒ€ë°ì´í„°
- **Payload**Â â€“Â EvidenceÂ JSON
- **Signature**Â â€“Â ì„œë²„ RSAâ€¯ê°œì¸í‚¤ë¡œÂ RS256 ì„œëª…

---

## APIÂ ì—”ë“œí¬ì¸íŠ¸

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
| --- | --- | --- |
| POST | `/api/v1/user` | ì‚¬ìš©ì ë“±ë¡ &Â APIÂ í‚¤ ë°œê¸‰ |
| PUT | `/api/v1/user/{user_id}` | RSAÂ í‚¤ êµí™˜ |
| POST | `/api/v1/watermark` | ì›Œí„°ë§ˆí¬ ì‚½ì… &Â ì¦ê±° ìƒì„± |
| POST | `/api/v1/extract-watermark` | ì´ë¯¸ì§€ì—ì„œ ì›Œí„°ë§ˆí¬ ì¶”ì¶œ |

---

## ë³´ì•ˆ
- **ë°ì´í„° ë¬´ê²°ì„±** â€“Â JWS ì„œëª…ìœ¼ë¡œ ë³€ì¡° ì—¬ë¶€ ì¦‰ì‹œ ê²€ì¦
- **í‚¤ ê´€ë¦¬** â€“Â RSAÂ í‚¤ êµí™˜
- **ê²€ì¦ ë¡œì§** â€“Â SHAâ€‘256 í•´ì‹œ, RFCâ€¯3161 íƒ€ì„ìŠ¤íƒ¬í”„, JWS ì„œëª… ê²€ì¦

---

## ì„œë¹„ìŠ¤ë¡œ ì–»ëŠ” ì´ì 
1. **í™•ì‹¤í•œ ì†Œìœ ê¶Œ ì¦ëª…** â€“Â ë³´ì´ì§€ ì•ŠëŠ” ì›Œí„°ë§ˆí¬ +Â RFCâ€¯3161 íƒ€ì„ìŠ¤íƒ¬í”„
2. **ë²•ì  ëŒ€ì‘ë ¥ ê°•í™”** â€“Â í‘œì¤€ ì¤€ìˆ˜ ì•„ì¹´ì´ë¸Œ ì¦ê±°
3. **ì¦ê±° ê´€ë¦¬ ë‹¨ìˆœí™”** â€“Â JWSÂ 1â€‘í† í° ì‹œìŠ¤í…œ
4. **ì—”ë“œâ€‘íˆ¬â€‘ì—”ë“œ ë³´ì•ˆ** â€“Â RSAÂ í‚¤ êµí™˜ &Â TLSÂ 1.3

---

> ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²• [Link](./installation_n_run.md)

